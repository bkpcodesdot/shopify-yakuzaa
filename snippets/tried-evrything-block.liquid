<div class="tried-everything-section" style="background-color: {{ section.settings.background_color | default: '#ffffff' }};">
  {% for block in section.blocks %}
    {% if block.type == 'tried_everything' %}
      <style>
        .tried-everything-{{ block.id }} {
          margin-top: {{ block.settings.margin_top | default: 0 }}px;
          margin-bottom: {{ block.settings.margin_bottom | default: 0 }}px;
        }

        .tried-everything-{{ block.id }} .container {
          max-width: {{ block.settings.container_width | default: 1200 }}px;
          margin: 0 auto;
          padding: {{ block.settings.section_padding | default: 40 }}px 20px;
        }

        .tried-everything-{{ block.id }} .content-wrapper {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: {{ block.settings.content_gap | default: 40 }}px;
          align-items: center;
        }

        .tried-everything-{{ block.id }} .text-content h2 {
          font-size: {{ section.settings.heading_font_size | default: 32 }}px;
          color: {{ section.settings.heading_color | default: '#000000' }};
          margin-bottom: {{ block.settings.heading_margin_bottom | default: 30 }}px;
          line-height: 1.2;
          font-weight: {{ block.settings.heading_weight | default: 700 }};
        }

        .tried-everything-{{ block.id }} .items-grid {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: {{ block.settings.items_gap | default: 16 }}px;
        }

        .tried-everything-{{ block.id }} .item {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .tried-everything-{{ block.id }} .bullet {
          width: {{ block.settings.bullet_size | default: 8 }}px;
          height: {{ block.settings.bullet_size | default: 8 }}px;
          background-color: {{ section.settings.point_color | default: '#ff1493' }};
          border-radius: 50%;
          flex-shrink: 0;
        }

        .tried-everything-{{ block.id }} .item-text {
          font-size: {{ section.settings.text_font_size | default: 16 }}px;
          color: {{ section.settings.text_color | default: '#333333' }};
          font-weight: {{ block.settings.item_text_weight | default: 400 }};
          line-height: 1.4;
        }

        .tried-everything-{{ block.id }} .image-content {
          position: relative;
        }

        .tried-everything-{{ block.id }} .image-content img {
          width: 100%;
          height: auto;
          display: block;
          border-radius: {{ block.settings.image_border_radius | default: 0 }}px;
        }

        .tried-everything-{{ block.id }} .x-mark {
          position: absolute;
          width: {{ block.settings.x_mark_size | default: 40 }}px;
          height: {{ block.settings.x_mark_size | default: 40 }}px;
        }

        .tried-everything-{{ block.id }} .x-mark::before,
        .tried-everything-{{ block.id }} .x-mark::after {
          content: '';
          position: absolute;
          width: 100%;
          height: {{ block.settings.x_mark_thickness | default: 4 }}px;
          background-color: {{ block.settings.x_mark_color | default: '#ff1493' }};
          top: 50%;
          left: 0;
        }

        .tried-everything-{{ block.id }} .x-mark::before {
          transform: translateY(-50%) rotate(45deg);
        }

        .tried-everything-{{ block.id }} .x-mark::after {
          transform: translateY(-50%) rotate(-45deg);
        }

        @media (max-width: 768px) {
          .tried-everything-{{ block.id }} .content-wrapper {
            grid-template-columns: 1fr;
            gap: 30px;
          }

          .tried-everything-{{ block.id }} .text-content h2 {
            font-size: {{ section.settings.heading_font_size | default: 32 | minus: 8 }}px;
          }

          .tried-everything-{{ block.id }} .items-grid {
            grid-template-columns: 1fr;
          }
        }
      </style>

      <div class="tried-everything-{{ block.id }}" {{ block.shopify_attributes }}>
        <div class="container">
          <div class="content-wrapper">
            <div class="text-content">
              {% if block.settings.heading != blank %}
                <h2>{{ block.settings.heading }}</h2>
              {% endif %}

              <div class="items-grid">
                {% for i in (1..8) %}
                  {% assign item_setting = 'item_' | append: i %}
                  {% if block.settings[item_setting] != blank %}
                    <div class="item">
                      <span class="bullet"></span>
                      <span class="item-text">{{ block.settings[item_setting] }}</span>
                    </div>
                  {% endif %}
                {% endfor %}
              </div>
            </div>

            <div class="image-content">
              {% if block.settings.main_image != blank %}
                <img 
                  src="{{ block.settings.main_image | image_url: width: 800 }}" 
                  alt="{{ block.settings.heading | default: 'Tried Everything' }}" 
                  loading="lazy"
                  width="800"
                  height="600"
                >
                
                {% if block.settings.show_x_marks %}
                  <span class="x-mark" style="top: {{ block.settings.x_mark_1_top | default: 10 }}%; left: {{ block.settings.x_mark_1_left | default: 10 }}%;"></span>
                  <span class="x-mark" style="top: {{ block.settings.x_mark_2_top | default: 5 }}%; right: {{ block.settings.x_mark_2_right | default: 5 }}%;"></span>
                  <span class="x-mark" style="top: {{ block.settings.x_mark_3_top | default: 50 }}%; left: {{ block.settings.x_mark_3_left | default: 15 }}%;"></span>
                  <span class="x-mark" style="bottom: {{ block.settings.x_mark_4_bottom | default: 10 }}%; right: {{ block.settings.x_mark_4_right | default: 10 }}%;"></span>
                {% endif %}
              {% else %}
                <div style="background: #f0f0f0; padding: 60px 20px; text-align: center; border-radius: 8px;">
                  <p style="color: #999;">Upload an image</p>
                </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>

    {% elsif block.type == 'content_block' %}
      <style>
        .content-block-{{ block.id }} {
          margin-top: {{ block.settings.content_margin_top }}px;
          margin-bottom: {{ block.settings.content_margin_bottom }}px;
          color: {{ block.settings.content_color }};
          font-size: {{ block.settings.content_font_size }}px;
          text-align: {{ block.settings.content_alignment }};
          max-width: 1200px;
          margin-left: auto;
          margin-right: auto;
          padding: 0 20px;
        }
      </style>

      <div class="content-block-{{ block.id }}" {{ block.shopify_attributes }}>
        {{ block.settings.content }}
      </div>
    {% endif %}
  {% endfor %}
</div>

<div class="beef-organ-section-{{ section.id }}">
  <div class="page-width">
    {%- if section.settings.heading != blank -%}
      <h2 class="section-heading">{{ section.settings.heading }}</h2>
    {%- endif -%}
    
    {%- for block in section.blocks -%}
      {%- if block.type == 'benefit_block' -%}
        <div class="benefits-list">
          {%- for benefit_block in section.blocks -%}
            {%- if benefit_block.type == 'benefit_item' -%}
              <div class="benefit-item">{{ benefit_block.settings.benefit_text }}</div>
            {%- endif -%}
          {%- endfor -%}
        </div>
      
      {%- elsif block.type == 'organs_grid' -%}
        <div class="organs-grid">
          {%- for organ_block in section.blocks -%}
            {%- if organ_block.type == 'organ_item' -%}
              <div class="organ-item">
                {%- if organ_block.settings.organ_image != blank -%}
                  <div class="organ-image">
                    <img src="{{ organ_block.settings.organ_image | img_url: '200x200' }}" alt="{{ organ_block.settings.organ_name }}" loading="lazy">
                  </div>
                {%- endif -%}
                <p class="organ-name">{{ organ_block.settings.organ_name }}</p>
              </div>
            {%- endif -%}
          {%- endfor -%}
        </div>
      
      {%- elsif block.type == 'spacer_block' -%}
        <div class="spacer" style="height: {{ block.settings.spacer_height }}px;"></div>
      
      {%- elsif block.type == 'content_block' -%}
        <div class="content-block">
          {%- if block.settings.content_heading != blank -%}
            <h3 class="content-heading">{{ block.settings.content_heading }}</h3>
          {%- endif -%}
          {%- if block.settings.content_text != blank -%}
            <div class="content-text">{{ block.settings.content_text }}</div>
          {%- endif -%}
        </div>
      {%- endif -%}
    {%- endfor -%}
  </div>
</div>

{%- style -%}
  .beef-organ-section-{{ section.id }} {
    padding: {{ section.settings.padding_top }}px {{ section.settings.padding_right }}px {{ section.settings.padding_bottom }}px {{ section.settings.padding_left }}px;
    background-color: {{ section.settings.background_color }};
  }
  
  .beef-organ-section-{{ section.id }} .section-heading {
    color: {{ section.settings.heading_color }};
    font-size: {{ section.settings.heading_size }}px;
    text-align: {{ section.settings.heading_alignment }};
    margin-bottom: 30px;
  }
  
  .beef-organ-section-{{ section.id }} .benefits-list {
    color: {{ section.settings.text_color }};
    font-size: {{ section.settings.text_size }}px;
    margin-bottom: 40px;
    text-align: {{ section.settings.text_alignment }};
  }
  
  .beef-organ-section-{{ section.id }} .benefit-item {
    margin-bottom: 10px;
  }
  
  .beef-organ-section-{{ section.id }} .organs-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
  }
  
  .beef-organ-section-{{ section.id }} .organ-item {
    text-align: center;
    padding: 20px;
    background: {{ section.settings.card_background }};
    border-radius: 8px;
    border: 1px solid {{ section.settings.card_border }};
  }
  
  .beef-organ-section-{{ section.id }} .organ-image {
    max-width: 80px;
    margin: 0 auto 15px;
  }
  
  .beef-organ-section-{{ section.id }} .organ-image img {
    width: 100%;
    height: auto;
    border-radius: 4px;
  }
  
  .beef-organ-section-{{ section.id }} .organ-name {
    color: {{ section.settings.organ_name_color }};
    font-size: {{ section.settings.organ_name_size }}px;
    font-weight: bold;
    margin: 0;
  }
  
  .beef-organ-section-{{ section.id }} .content-block {
    margin-bottom: 30px;
    text-align: {{ section.settings.text_alignment }};
  }
  
  .beef-organ-section-{{ section.id }} .content-heading {
    color: {{ section.settings.heading_color }};
    font-size: {{ section.settings.heading_size | times: 0.8 }}px;
    margin-bottom: 15px;
  }
  
  .beef-organ-section-{{ section.id }} .content-text {
    color: {{ section.settings.text_color }};
    font-size: {{ section.settings.text_size }}px;
    line-height: 1.6;
  }
  
  .beef-organ-section-{{ section.id }} .spacer {
    width: 100%;
    clear: both;
  }

  @media (max-width: 768px) {
    .beef-organ-section-{{ section.id }} {
      padding: {{ section.settings.mobile_padding_top }}px {{ section.settings.mobile_padding_right }}px {{ section.settings.mobile_padding_bottom }}px {{ section.settings.mobile_padding_left }}px;
    }
    
    .beef-organ-section-{{ section.id }} .organs-grid {
      grid-template-columns: repeat(2, 1fr);
    }
    
    .beef-organ-section-{{ section.id }} .content-heading {
      font-size: {{ section.settings.heading_size | times: 0.7 }}px;
    }
  }
{%- endstyle -%}