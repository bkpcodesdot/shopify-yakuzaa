{% style %}
  .ai-parasite-info {
    background-color: {{ section.settings.section_background }};
    padding: {{ section.settings.section_padding }}px 20px;
    max-width: 726px;
    margin: 0 auto;
  }

  .ai-parasite-info-title {
    font-size: {{ section.settings.title_size }}px;
    font-weight: bold;
    color: {{ section.settings.title_color }};
    margin-bottom: 20px;
    line-height: 1.2;
    text-align: left;
  }
  .ai-parasite-info-highlight {
    color: {{ section.settings.highlight_color }};
  }

  .ai-parasite-info-intro {
    font-size: {{ section.settings.text_size }}px;
    color: {{ section.settings.text_color }};
    margin-bottom: 30px;
    line-height: 1.6;
    text-align: left;
  }

  .ai-parasite-info-main-image {
    width: 100%;
    margin-bottom: 40px;
    border-radius: {{ section.settings.image_border_radius }}px;
    overflow: hidden;
  }
  .ai-parasite-info-main-image img {
    width: 100%;
    height: auto;
    display: block;
    aspect-ratio: 182 / 85;
    object-fit: cover;
}

  .ai-parasite-info-subsection-title {
    font-size: {{ section.settings.subsection_title_size }}px;
    font-weight: bold;
    color: {{ section.settings.title_color }};
    margin-bottom: 25px;
    text-align: left;
  }

  .ai-parasite-info-item {
    display: grid;
    grid-template-columns: 128px auto;
    align-items: flex-start;
    gap: 15px;
    margin-bottom: 25px;
    padding: 15px;
    border-radius: {{ section.settings.item_border_radius }}px;
  }
  .ai-parasite-info-item img {
    width: 100%;
    border-radius: 8px;
    object-fit: cover;
  }
  .ai-parasite-info-item-title {
    font-size: {{ section.settings.item_title_size }}px;
    font-weight: bold;
    margin-bottom: 8px;
    color: {{ section.settings.title_color }};
  }
  .ai-parasite-info-item-description {
    font-size: {{ section.settings.text_size }}px;
    color: #000000CF;
    line-height: 1.5;
    font-weight: 300;
  }

  .ai-parasite-info-bottom-title {
    font-size: {{ section.settings.bottom_title_size }}px;
    font-weight: bold;
    margin-bottom: 15px;
    font-style: italic;
    color: {{ section.settings.title_color }};
  }
  .ai-parasite-info-bottom-text {
    font-size: {{ section.settings.text_size }}px;
    color: {{ section.settings.text_color }};
    margin-bottom: 25px;
    line-height: 26px;
  }

  .ai-parasite-info-cta {
    display: block;
    background-color: {{ section.settings.button_background }};
    color: {{ section.settings.button_text_color }};
    padding: {{ section.settings.button_padding }}px {{ section.settings.button_padding | times: 1.5 }}px;
    border-radius: {{ section.settings.button_border_radius }}px;
    font-size: {{ section.settings.button_text_size }}px;
    font-weight: 600;
    text-decoration: none;
    transition: background-color 0.3s ease;
    text-align: center;
  }
  .ai-parasite-info-cta:hover {
    background-color: {{ section.settings.button_hover_background }};
    color:#ee882f;
    border:2px solid #ee882f;
  }

  @media screen and (max-width: 768px) {
    .ai-parasite-info {
      padding: {{ section.settings.section_padding | times: 0.7 }}px 15px;
    }
    .ai-parasite-info-title {
      font-size: {{ section.settings.title_size | times: 0.8 }}px;
    }
    .ai-parasite-info-item {
      grid-template-columns: 1fr;
      text-align: center;
    }
    .ai-parasite-info-cta {
      width: 100%;
    }
  }
{% endstyle %}

<div class="ai-parasite-info" {{ section.shopify_attributes }}>
  {% if section.settings.main_title != blank %}
    <h2 class="ai-parasite-info-title">
      {% assign parts = section.settings.main_title | split: section.settings.highlight_text %}
      {% if parts.size > 1 %}
        {{ parts[0] }}<span class="ai-parasite-info-highlight">{{ section.settings.highlight_text }}</span>{{ parts[1] }}
      {% else %}
        {{ section.settings.main_title }}
      {% endif %}
    </h2>
  {% endif %}

  {% if section.settings.intro_text != blank %}
    <div class="ai-parasite-info-intro">{{ section.settings.intro_text }}</div>
  {% endif %}

  {% if section.settings.main_image %}
    <div class="ai-parasite-info-main-image">
      <img src="{{ section.settings.main_image | image_url: width: 1200 }}" alt="Main Image" loading="lazy">
    </div>
  {% endif %}

  {% if section.settings.subsection_title != blank %}
    <h3 class="ai-parasite-info-subsection-title">{{ section.settings.subsection_title }}</h3>
  {% endif %}

  <div class="ai-parasite-info-list">
    {% for block in section.blocks %}
      <div class="ai-parasite-info-item">
        {% if block.settings.image %}
          <img src="{{ block.settings.image | image_url: width: 200 }}" alt="{{ block.settings.title }}">
        {% endif %}
        <div>
          {% if block.settings.title != blank %}
            <h4 class="ai-parasite-info-item-title">{{ block.settings.title }}</h4>
          {% endif %}
          {% if block.settings.description != blank %}
            <div class="ai-parasite-info-item-description">{{ block.settings.description }}</div>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>

  {% if section.settings.bottom_line_title != blank %}
    <h3 class="ai-parasite-info-bottom-title">{{ section.settings.bottom_line_title }}</h3>
  {% endif %}
  {% if section.settings.bottom_line_text != blank %}
    <div class="ai-parasite-info-bottom-text">{{ section.settings.bottom_line_text }}</div>
  {% endif %}

  {% if section.settings.cta_text != blank %}
    <a href="{{ section.settings.cta_link }}" class="ai-parasite-info-cta">{{ section.settings.cta_text }}</a>
  {% endif %}
</div>

{% schema %}
{
  "name": "Parasite info section",
  "settings": [
    {
      "type": "text",
      "id": "main_title",
      "label": "Main title",
      "default": "How Do Parasites and Candida Get Inside Us?"
    },
    {
      "type": "text",
      "id": "highlight_text",
      "label": "Highlight text",
      "default": "Parasites and Candida"
    },
    {
      "type": "richtext",
      "id": "intro_text",
      "label": "Intro text",
      "default": "<p>Understanding how these harmful organisms enter our bodies is the <strong>first step</strong> in protecting ourselves.</p>"
    },
    {
      "type": "image_picker",
      "id": "main_image",
      "label": "Main image"
    },
    {
      "type": "text",
      "id": "subsection_title",
      "label": "Subsection title",
      "default": "How parasites and candida sneak in:"
    },
    {
      "type": "text",
      "id": "bottom_line_title",
      "label": "Bottom line title",
      "default": "Bottom line?"
    },
    {
      "type": "richtext",
      "id": "bottom_line_text",
      "label": "Bottom line text",
      "default": "<p>These organisms are everywhere. The key is <strong>supporting your body's defenses</strong>.</p>"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA button text",
      "default": "TRY RESILIA RISK-FREE"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "CTA button link"
    },
    {
      "type": "color",
      "id": "section_background",
      "label": "Section background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "highlight_color",
      "label": "Highlight color",
      "default": "#ff6b35"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "item_background",
      "label": "Item background",
      "default": "#f9f9f9"
    },
    {
      "type": "color",
      "id": "button_background",
      "label": "Button background",
      "default": "#ff6b35"
    },
    {
      "type": "color",
      "id": "button_hover_background",
      "label": "Button hover background",
      "default": "#e55a2b"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 20,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Main title size",
      "default": 36
    },
    {
      "type": "range",
      "id": "subsection_title_size",
      "min": 16,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Subsection title size",
      "default": 24
    },
    {
      "type": "range",
      "id": "item_title_size",
      "min": 14,
      "max": 28,
      "step": 2,
      "unit": "px",
      "label": "Item title size",
      "default": 18
    },
    {
      "type": "range",
      "id": "text_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Text size",
      "default": 16
    },
    {
      "type": "range",
      "id": "bottom_title_size",
      "min": 16,
      "max": 32,
      "step": 2,
      "unit": "px",
      "label": "Bottom title size",
      "default": 22
    },
    {
      "type": "range",
      "id": "button_text_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Button text size",
      "default": 16
    },
    {
      "type": "range",
      "id": "section_padding",
      "min": 20,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Section padding",
      "default": 50
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Main image border radius",
      "default": 8
    },
    {
      "type": "range",
      "id": "item_border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Item border radius",
      "default": 8
    },
    {
      "type": "range",
      "id": "button_padding",
      "min": 10,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Button padding",
      "default": 16
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Button border radius",
      "default": 8
    }
  ],
  "blocks": [
    {
      "type": "sneak_in_item",
      "name": "Sneak in item",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Contaminated Food"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Unwashed fruits and vegetables, undercooked meat, and contaminated water sources can harbor parasites."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Parasite info section",
      "category": "Custom"
    }
  ]
}
{% endschema %}
