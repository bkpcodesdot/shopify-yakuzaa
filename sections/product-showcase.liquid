{% assign ai_gen_id = section.id | replace: '_', '' | downcase %}

<div class="ai-product-showcase-{{ ai_gen_id }}" {{ section.shopify_attributes }}>
  <h2 class="ai-product-showcase__title-{{ ai_gen_id }}">
    {{ section.settings.heading_text }}
    <span class="highlight">{{ section.settings.highlight_word }}</span>
  </h2>

  {% if section.settings.intro_text != blank %}
    <div class="ai-product-showcase__intro-{{ ai_gen_id }}">
      {{ section.settings.intro_text }}
    </div>
  {% endif %}

  <div class="ai-product-showcase__main-image-{{ ai_gen_id }}">
    {% if section.settings.main_image %}
      <img
        src="{{ section.settings.main_image | image_url: width: 800 }}"
        alt="{{ section.settings.main_image.alt | escape }}"
        loading="lazy"
        width="{{ section.settings.main_image.width }}"
        height="{{ section.settings.main_image.height }}"
      >
    {% else %}
      <div class="ai-product-showcase__main-image-placeholder-{{ ai_gen_id }}">
        {{ 'product-apparel-1' | placeholder_svg_tag }}
        <div class="ai-product-showcase__empty-state-{{ ai_gen_id }}">
          Add your main product image
        </div>
      </div>
    {% endif %}
  </div>

  {% if section.settings.show_features %}
    <div class="ai-product-showcase__features-{{ ai_gen_id }}">
      {% for i in (1..5) %}
        {% assign feature_enabled_key = 'feature_' | append: i | append: '_enabled' %}
        {% assign feature_icon_key = 'feature_' | append: i | append: '_icon' %}
        {% assign feature_title_key = 'feature_' | append: i | append: '_title' %}
        {% assign feature_description_key = 'feature_' | append: i | append: '_description' %}

        {% if section.settings[feature_enabled_key] %}
          <div class="ai-product-showcase__feature-{{ ai_gen_id }}">
            <div class="ai-product-showcase__feature-icon-{{ ai_gen_id }}">
              {% if section.settings[feature_icon_key] %}
                <img
                  src="{{ section.settings[feature_icon_key] | image_url: width: 100 }}"
                  alt="{{ section.settings[feature_title_key] | escape }}"
                  loading="lazy"
                >
              {% else %}
                <div class="ai-product-showcase__feature-icon-placeholder-{{ ai_gen_id }}">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20,6 9,17 4,12"></polyline>
                  </svg>
                </div>
              {% endif %}
            </div>
            <div class="ai-product-showcase__feature-content-{{ ai_gen_id }}">
              {% if section.settings[feature_title_key] != blank %}
                <div class="ai-product-showcase__feature-title-{{ ai_gen_id }}">
                  {{ section.settings[feature_title_key] }}
                </div>
              {% endif %}
              {% if section.settings[feature_description_key] != blank %}
                <div class="ai-product-showcase__feature-description-{{ ai_gen_id }}">
                  {{ section.settings[feature_description_key] }}
                </div>
              {% endif %}
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  {% endif %}

  <div class="ai-product-showcase__secondary-image-{{ ai_gen_id }}">
    {% if section.settings.secondary_image %}
      <img
        src="{{ section.settings.secondary_image | image_url: width: 600 }}"
        alt="{{ section.settings.secondary_image.alt | escape }}"
        loading="lazy"
        width="{{ section.settings.secondary_image.width }}"
        height="{{ section.settings.secondary_image.height }}"
      >
    {% else %}
      <div class="ai-product-showcase__secondary-image-placeholder-{{ ai_gen_id }}">
        {{ 'image' | placeholder_svg_tag }}
        <div class="ai-product-showcase__empty-state-{{ ai_gen_id }}">
          Add your secondary image
        </div>
      </div>
    {% endif %}
  </div>

  {% if section.settings.supporting_text != blank %}
    <div class="ai-product-showcase__supporting-text-{{ ai_gen_id }}">
      {{ section.settings.supporting_text }}
    </div>
  {% endif %}

  {% if section.settings.subheading != blank %}
    <h3 class="ai-product-showcase__subheading-{{ ai_gen_id }}">
      {{ section.settings.subheading }}
    </h3>
  {% endif %}

  <div class="ai-product-showcase__columns-{{ ai_gen_id }}">
    {% for i in (1..2) %}
      {% assign column_image_key = 'column_' | append: i | append: '_image' %}
      {% assign column_title_key = 'column_' | append: i | append: '_title' %}
      {% assign column_content_key = 'column_' | append: i | append: '_content' %}

      <div class="ai-product-showcase__column-{{ ai_gen_id }}">
        <div class="ai-product-showcase__column-image-{{ ai_gen_id }}">
          {% if section.settings[column_image_key] %}
            <img
              src="{{ section.settings[column_image_key] | image_url: width: 400 }}"
              alt="{{ section.settings[column_title_key] | escape }}"
              loading="lazy"
              width="{{ section.settings[column_image_key].width }}"
              height="{{ section.settings[column_image_key].height }}"
            >
          {% else %}
            <div class="ai-product-showcase__column-image-placeholder-{{ ai_gen_id }}">
              {{ 'image' | placeholder_svg_tag }}
            </div>
          {% endif %}
        </div>
        {% if section.settings[column_title_key] != blank %}
          <h4 class="ai-product-showcase__column-title-{{ ai_gen_id }}">
            {{ section.settings[column_title_key] }}
          </h4>
        {% endif %}
        {% if section.settings[column_content_key] != blank %}
          <div class="ai-product-showcase__column-content-{{ ai_gen_id }}">
            {{ section.settings[column_content_key] }}
          </div>
        {% endif %}
      </div>
    {% endfor %}
  </div>

  {% if section.settings.cta_text != blank %}
    <div class="ai-product-showcase__cta-{{ ai_gen_id }}">
      <a
        href="{{ section.settings.cta_link | default: '#' }}"
        class="ai-product-showcase__cta-button-{{ ai_gen_id }}"
      >
        {{ section.settings.cta_text }}
      </a>
    </div>
  {% endif %}
</div>

{% schema %}
{
  "name": "Product showcase",
  "settings": [
    {
      "type": "text",
      "id": "heading_text",
      "label": "Main heading",
      "default": "The Natural, Science-Backed"
    },
    {
      "type": "text",
      "id": "highlight_word",
      "label": "Highlight word",
      "default": "Solution"
    },
    {
      "type": "richtext",
      "id": "intro_text",
      "label": "Introduction text",
      "default": "<p>Discover our revolutionary approach to wellness...</p>"
    },
    {
      "type": "image_picker",
      "id": "main_image",
      "label": "Main product image"
    },
    {
      "type": "checkbox",
      "id": "show_features",
      "label": "Show feature points",
      "default": true
    },
    {
      "type": "range",
      "id": "icon_size",
      "min": 20,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Icon size",
      "default": 30
    },
    {
      "type": "color",
      "id": "check_icon_color",
      "label": "Default check icon color",
      "default": "#28A745"
    },
    { "type": "header", "content": "Features" },
    { "type": "checkbox", "id": "feature_1_enabled", "label": "Enable feature 1", "default": true },
    { "type": "image_picker", "id": "feature_1_icon", "label": "Feature 1 icon" },
    { "type": "text", "id": "feature_1_title", "label": "Feature 1 title", "default": "Clinically Proven" },
    { "type": "text", "id": "feature_1_description", "label": "Feature 1 description", "default": "Backed by extensive clinical research and testing" }
    /* Repeat similar for features 2â€“5 */
  ],
  "presets": [
    {
      "name": "Product showcase"
    }
  ]
}
{% endschema %}
