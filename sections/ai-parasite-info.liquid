{% assign ai_gen_id = section.id | replace: '_', '' | downcase %}

{% style %}
/* Container */
.ai-parasite-info-{{ ai_gen_id }} {
  background-color: var(--section-bg);
  padding: var(--section-padding) 20px;
  max-width: 726px;
  margin: 0 auto;
  box-sizing: border-box;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}

/* Heading */
.ai-parasite-heading {
  font-size: var(--title-size);
  font-weight: bold;
  color: var(--title-color);
  margin-bottom: 20px;
  line-height: 1.2;
  text-align: left;
}
.ai-parasite-heading .highlight { color: var(--highlight-color); }

/* Intro */
.ai-parasite-intro {
  font-size: var(--text-size);
  color: var(--text-color);
  margin-bottom: 30px;
  line-height:1.6;
  text-align:left;
}
.ai-parasite-item-wrapper {
    display: grid;
    grid-template-columns: 128px auto;
    gap: 16px;
    align-items: flex-start;
    margin-bottom: 24px;
}
.ai-parasite-item-image img {
  width: 100px;
  max-width:128px;
  height: 100px;
  object-fit: cover;
}
.ai-parasite-item-text {
  flex: 1;
}
.ai-parasite-item-title {
  font-weight: bold;
  font-size: 18px;
  margin-bottom: 6px;
}
.ai-parasite-item-description {
  font-size: 16px;
  line-height: 1.5;
}

/* Main Image */
.ai-parasite-main-image {
  width:100%;
  margin-bottom:40px;
  border-radius: var(--image-border-radius);
  overflow:hidden;
}
.ai-parasite-main-image img {
  width: 100%;
  display: block;
  height: auto;
  object-fit: cover;
  object-position: bottom;
  aspect-ratio: 119 / 66;
}

/* Subsection Title */
.ai-parasite-subsection-title {
  font-size: var(--subsection-title-size);
  font-weight:bold;
  color:var(--title-color);
  text-align:left;
  margin-bottom:12px;
}

/* Sneak-in Items */
.ai-parasite-item img { width: 100%; border-radius:8px; object-fit:cover; margin-bottom: 8px; }
.ai-parasite-item-title { font-weight:bold; font-size: 18px; margin-bottom:6px; }
.ai-parasite-item-description { font-size:16px; line-height:1.5; margin-bottom: 16px; }

/* Bottom Line */
.ai-parasite-bottom-title {
  font-size: var(--bottom-title-size);
  max-width:726px;
  font-weight:bold;
  margin-bottom:15px;
  font-style:italic;
  color:var(--title-color);
}
.ai-parasite-bottom-text {
  font-size: var(--text-size);
  color:var(--text-color);
  margin-bottom:25px;
  line-height:26px;
}

/* CTA */
.ai-parasite-cta {
  display:block;
  background-color: var(--button-bg);
  color: var(--button-text-color);
  padding: var(--button-padding) var(--button-padding-hr);
  border-radius: var(--button-radius);
  font-size: var(--button-text-size);
  font-weight:600;
  text-decoration:none;
  text-align:center;
  transition: background-color .3s;
}
.ai-parasite-cta:hover {
  background-color: var(--button-hover-bg);
  color: #ee882f;
  border: 2px solid #ee882f;
}
/* Testimonial */
.ai-testimonial-grid-{{ section.id }}{
  display:grid;
 grid-template-columns: repeat(3, 1fr); 
}
  .ai-testimonials-{{ section.id }} {
    padding: 0px 20px;
    max-width: 726px;
    margin: 0 auto;
    background-color: {{ section.settings.section_background_color }};
  }

  .ai-testimonials-description-{{ section.id }} {
    font-size: {{ block.settings.description_font_size }};
    color: {{ block.settings.description_color }};
    margin-bottom: 30px;
  }
  .ai-testimonial-card-{{ section.id }} {
    background-color: #F8F9FA;
    border: 1px solid #016401;
    border-radius: 5px;
    padding: 15px;
    margin-bottom: 20px;
  }
  .ai-testimonial-quote-{{ section.id }} {
    font-size: 18px;
    margin-bottom: 12px;
    line-height:23px;
  }
  .ai-testimonial-footer-{{ section.id }} {
    display: flex;
    gap: 12px;
    align-items: center;
  }
  .ai-testimonial-icon-{{ section.id }} img {
    width: 40px;
    height: 40px;
  }
  .ai-testimonial-name-{{ section.id }} {
    font-weight: bold;
    font-size: 14px;
    color: #000;
  }
  .ai-testimonial-verified-{{ section.id }} {
    font-size: 12px;
    color: #666;
  }

  .ai-testimonials-title-{{ section.id }} {
    font-size: var(--title-size);
    color: var(--title-color);
  }
  .ai-testimonials-title-{{ section.id }} .highlight {
    color: var(--highlight-color);
    font-weight: bold;
  }


.ai-testimonials-cta-{{ section.id }} {
    text-align: center;
    margin-top: 40px;
  }
  .ai-testimonials-button-{{ section.id }} {
    background-color: {{ block.settings.button_background_color | default: '#EE882F' }};
    color: white;
    padding: 16px 32px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: bold;
    display:block;
    text-align: center;
    font-size: {{ block.settings.button_font_size | default: 16 }}px;
}

  .ai-testimonials-button-{{ section.id }}:hover {
    background-color:{{ block.settings.button_hover_background_color }};
    color: {{ block.settings.button_hover_text_color }};
  }
  @media screen and (max-width: 576px) {
    .ai-testimonial-grid-{{ section.id }}{
    grid-template-columns: repeat(1, 1fr) !important;}
    .ai-testimonials-title-{{ section.id }} {
    font-size: 2px !important;
    }
/* Responsive */
@media screen and (max-width: 768px) {
  .ai-parasite-info-{{ ai_gen_id }} { padding: calc(var(--section-padding) * 0.7) 15px; }
  .ai-parasite-cta { width:100%; }
}
@media screen and (max-width: 576px) {
  .ai-parasite-subsection-title { font-size: 20px; }
  .ai-parasite-intro { font-size: 15px; }
}
{% endstyle %}

<div class="ai-parasite-info-{{ ai_gen_id }}" style="
  --section-bg: {{ section.settings.section_background }};
  --section-padding: {{ section.settings.section_padding }}px;
  --title-size: {{ section.settings.title_size }}px;
  --title-color: {{ section.settings.title_color }};
  --highlight-color: {{ section.settings.highlight_color }};
  --text-size: {{ section.settings.text_size }}px;
  --text-color: {{ section.settings.text_color }};
  --image-border-radius: {{ section.settings.image_border_radius }}px;
  --subsection-title-size: {{ section.settings.subsection_title_size }}px;
  --bottom-title-size: {{ section.settings.bottom_title_size }}px;
  --button-bg: {{ section.settings.button_background }};
  --button-hover-bg: {{ section.settings.button_hover_background }};
  --button-text-color: {{ section.settings.button_text_color }};
  --button-text-size: {{ section.settings.button_text_size }}px;
  --button-padding: {{ section.settings.button_padding }}px;
  --button-padding-hr: {{ section.settings.button_padding | times: 1.5 }}px;
  --button-radius: {{ section.settings.button_border_radius }}px;
">

{% for block in section.blocks %}
  {% case block.type %}

    {% when 'heading' %}
      <div class="ai-parasite-heading" style="
        --title-size: {{ block.settings.title_size }}px;
        --title-color: {{ block.settings.title_color }};
        --highlight-color: {{ block.settings.highlight_color }};
      ">
        {{ block.settings.main_title | replace: block.settings.highlight_text, '<span class="highlight">' | append: block.settings.highlight_text | append: '</span>' }}
      </div>

    {% when 'intro' %}
      <div class="ai-parasite-intro" style="
        --text-size: {{ block.settings.text_size }}px;
        --text-color: {{ block.settings.text_color }};
      ">
        {{ block.settings.intro_text }}
      </div>

    {% when 'main_image' %}
      <div class="ai-parasite-main-image" style="--image-border-radius: {{ block.settings.image_border_radius }}px;">
        {% if block.settings.main_image != blank %}
          <img src="{{ block.settings.main_image | img_url: 'master'  }}"  alt="">
        {% endif %}
      </div>

    {% when 'subsection_title' %}
      <div class="ai-parasite-subsection-title" style="--subsection-title-size: {{ block.settings.subsection_title_size }}px;">
        {{ block.settings.subsection_title }}
      </div>
      <div class="">
        
  {% when 'sneak_in_item' %}
  <div class="ai-parasite-item" style="display: grid; gap: 16px; align-items: flex-start; grid-template-columns: 128px auto;margin-bottom: 24px;">
    {% if block.settings.image != blank %}
      <div style="flex: 0 0 100px;">
        <img src="{{ block.settings.image | img_url: '150x150' }}" alt="{{ block.settings.title }}" style=" height: auto; max-width:128px; object-fit: cover;">
      </div>
    {% endif %}
    <div style="flex: 1;">
      <div class="ai-parasite-item-title">{{ block.settings.title }}</div>
      <div class="ai-parasite-item-description">{{ block.settings.description }}</div>
    </div>
  </div>

      {% when 'sneak_in_title' %}
        <div class="ai-parasite-item-title">{{ block.settings.title }}</div>
      </div>
      {% when 'sneak_in_description' %}
        <div class="ai-parasite-item-description">{{ block.settings.description }}</div>
    
    {% when 'bottom_line' %}
      <div class="ai-parasite-bottom-title" style="--bottom-title-size: {{ block.settings.bottom_title_size }}px;">
        {{ block.settings.bottom_line_title }}
      </div>
      <div class="ai-parasite-bottom-text">{{ block.settings.bottom_line_text }}</div>

    {% when 'cta' %}
      <a href="{{ block.settings.cta_link }}" class="ai-parasite-cta" style="
        --button-bg: {{ block.settings.button_background }};
        --button-text-color: {{ block.settings.button_text_color }};
        --button-text-size: {{ block.settings.button_text_size }}px;
        --button-padding: {{ block.settings.button_padding }}px;
        --button-padding-hr: {{ block.settings.button_padding | times: 1.5 }}px;
        --button-radius: {{ block.settings.button_border_radius }}px;
      ">
        {{ block.settings.cta_text }}
      </a>
{% when 'testimonial_title' %}
        <h2 class="ai-testimonials-title-{{ section.id }}" style="
      --title-size: {{ block.settings.title_size }}px;
      --title-color: {{ block.settings.title_color }};
      --highlight-color: {{ block.settings.highlight_color }};
    ">
      {% assign full_title = block.settings.title %}
      {% assign highlight_word = block.settings.highlight_text %}
      
      {% if highlight_word != blank and full_title contains highlight_word %}
        {% assign parts = full_title | split: highlight_word %}
        {{ parts[0] }}<span class="highlight">{{ highlight_word }}</span>{{ parts[1] }}
      {% else %}
        {{ full_title }}
      {% endif %}
    </h2>

      {% when 'testimonial_description' %}
        <div class="ai-testimonials-description-{{ section.id }}" style="margin-bottom: 30px;">
          {{ block.settings.description | raw }}
        </div>

  {% when 'testimonial_item' %}
    {% comment %} Create grid wrapper only once before the first testimonial {% endcomment %}
        <div class="ai-testimonial-grid-{{ section.id }}">

    
    {% comment %} Individual testimonial card {% endcomment %}
    <div class="ai-testimonial-card-{{ section.id }}" style="
        background-color: #F8F9FA;
        border: 1px solid #016401;
        border-radius: 5px;
        padding: 15px;">
        <div class="ai-testimonial-quote-{{ section.id }}" style="
            font-size: 18px;
            margin-bottom: 12px;
            line-height: 23px;">
            "{{ block.settings.quote }}"
        </div>
        <div class="ai-testimonial-footer-{{ section.id }}" style="display: flex; gap: 12px; align-items: center;">
            {% if block.settings.icon %}
                <div class="ai-testimonial-icon-{{ section.id }}">
                    <img src="{{ block.settings.icon | img_url: '100x100' }}" alt="{{ block.settings.name }}" style="width: 40px; height: 40px; border-radius: 50%;">
                </div>
            {% endif %}
            <div>
                <div class="ai-testimonial-name-{{ section.id }}" style="font-weight: bold; font-size: 14px; color: #000;">
                    {{ block.settings.name }}, {{ block.settings.age }}
                </div>
                <div class="ai-testimonial-verified-{{ section.id }}" style="font-size: 12px; color: #666;">
                    {{ block.settings.verified_label }}
                </div>
            </div>
        </div>
    </div>
     </div>
   
  

      {% when 'testimonial_cta' %}
        <div class="ai-testimonials-cta-{{ section.id }}" style="text-align: center; margin-top: 40px;">
          <a href="{{ block.settings.button_link }}" class="ai-testimonials-button-{{ section.id }}" style="
            background-color: {{ block.settings.button_background_color | default: '#EE882F' }};
            color: {{ block.settings.button_text_color | default: '#fff' }};
            padding: {{ block.settings.button_padding | default: 16 }}px;
            border-radius: {{ block.settings.button_border_radius | default: 8 }}px;
            text-decoration: none;
            font-weight: bold;
            font-size: {{ block.settings.button_font_size | default: 16 }}px;
            display: inline-block;
          ">
            {{ block.settings.button_text }}
          </a>
        </div>
  {% endcase %}
{% endfor %}

</div>

{% schema %}
{
  "name": "Parasite info (blocks)",
  "settings": [
    {"type":"color","id":"section_background","label":"Section background","default":"#ffffff"},
    {"type":"color","id":"title_color","label":"Title color","default":"#000000"},
    {"type":"color","id":"highlight_color","label":"Highlight color","default":"#ff6b35"},
    {"type":"color","id":"text_color","label":"Text color","default":"#333333"},
    {"type":"range","id":"title_size","label":"Main title size","min":20,"max":60,"step":2,"unit":"px","default":36},
    {"type":"range","id":"text_size","label":"Body text size","min":12,"max":20,"step":1,"unit":"px","default":16},
    {"type":"range","id":"image_border_radius","label":"Main image border radius","min":0,"max":30,"step":1,"unit":"px","default":8},
    {"type":"range","id":"subsection_title_size","label":"Subsection title size","min":14,"max":40,"step":1,"unit":"px","default":24},
    {"type":"range","id":"bottom_title_size","label":"Bottom title size","min":16,"max":32,"step":1,"unit":"px","default":22},
    {"type":"color","id":"button_background","label":"Button background","default":"#ff6b35"},
    {"type":"color","id":"button_hover_background","label":"Button hover background","default":"#e55a2b"},
    {"type":"color","id":"button_text_color","label":"Button text color","default":"#ffffff"},
    {"type":"range","id":"button_text_size","label":"Button text size","min":12,"max":24,"step":1,"unit":"px","default":16},
    {"type":"range","id":"button_padding","label":"Button padding","min":8,"max":30,"step":1,"unit":"px","default":16},
    {"type":"range","id":"button_border_radius","label":"Button border radius","min":0,"max":30,"step":1,"unit":"px","default":8},
    {"type":"range","id":"section_padding","label":"Section padding","min":20,"max":100,"step":5,"unit":"px","default":50}
  ],
  "blocks": [
    {
      "type": "heading",
      "name": "Heading",
      "settings": [
        {"type":"text","id":"main_title","label":"Main title"},
        {"type":"text","id":"highlight_text","label":"Highlight text"},
        {"type":"range","id":"title_size","label":"Title font size","min":20,"max":60,"default":36},
        {"type":"color","id":"title_color","label":"Title color"},
        {"type":"color","id":"highlight_color","label":"Highlight color"}
      ]
    },
    {
      "type": "intro",
      "name": "Intro",
      "settings": [
        {"type":"richtext","id":"intro_text","label":"Intro text"},
        {"type":"range","id":"text_size","label":"Intro font size","min":12,"max":24,"default":16},
        {"type":"color","id":"text_color","label":"Intro color"}
      ]
    },
    {
      "type": "main_image",
      "name": "Main image",
      "settings": [
        {"type":"image_picker","id":"main_image","label":"Main image"},
        {"type":"range","id":"image_border_radius","label":"Main image border radius","min":0,"max":30,"default":8}
      ]
    },
    {
      "type": "subsection_title",
      "name": "Subsection title",
      "settings": [
        {"type":"text","id":"subsection_title","label":"Subsection title"},
        {"type":"range","id":"subsection_title_size","label":"Subsection title size","min":12,"max":40,"default":24}
      ]
    },
    {
      "type": "sneak_in_item",
      "name": "Sneak-in Item",
      "settings": [
        {"type":"image_picker","id":"image","label":"Image"},
        {"type":"text","id":"title","label":"Title"},
        {"type":"richtext","id":"description","label":"Description"}
      ]
    },
    {
      "type": "bottom_line",
      "name": "Bottom line",
      "settings": [
        {"type":"text","id":"bottom_line_title","label":"Bottom line title"},
        {"type":"richtext","id":"bottom_line_text","label":"Bottom line text"},
        {"type":"range","id":"bottom_title_size","label":"Bottom title size","min":16,"max":36,"default":22}
      ]
    },
    {
      "type": "cta",
      "name": "CTA",
      "settings": [
        {"type":"text","id":"cta_text","label":"CTA text"},
        {"type":"url","id":"cta_link","label":"CTA link"},
        {"type":"color","id":"button_background","label":"Button background"},
        {"type":"color","id":"button_text_color","label":"Button text color"},
        {"type":"range","id":"button_text_size","label":"Button text size","min":12,"max":24,"default":16},
        {"type":"range","id":"button_padding","label":"Button padding","min":8,"max":30,"default":16},
        {"type":"range","id":"button_border_radius","label":"Button border radius","min":0,"max":30,"default":8}
      ]
    },
    {
      "type": "testimonial_title",
      "name": "Testimonial Title",
      "settings": [
        {"type": "richtext", "id": "title", "label": "Title", "default": "<p>What Customers Are Saying</p>"},
        {"type": "text", "id": "highlight_text", "label": "Text to Highlight"},
        {"type": "range", "id": "title_size", "label": "Title Font Size", "min": 10, "max": 80, "step": 1, "default": 36},
        {"type": "color", "id": "title_color", "label": "Title Color", "default": "#000000"},
        {"type": "color", "id": "highlight_color", "label": "Highlight Color", "default": "#FF6B35"}
      ]
    },
    {
      "type": "testimonial_description",
      "name": "Testimonial Description",
      "settings": [
        {"type": "richtext", "id": "description", "label": "Description", "default": "<p>Real customers. Real feedback. Real results.</p>"},
         {
      "type": "number",
      "id": "description_font_size",
      "label": "Description Font Size (px)",
      "default": 16
    }
      ]
    },
    {
      "type": "testimonial_item",
      "name": "Testimonial",
      "settings": [
        {"type": "textarea", "id": "quote", "label": "Quote"},
        {"type": "text", "id": "name", "label": "Name"},
        {"type": "text", "id": "age", "label": "Age"},
        {"type": "image_picker", "id": "icon", "label": "Customer Icon"},
        {"type": "text", "id": "verified_label", "label": "Verified Label", "default": "Verified Customer"}
      ]
    },
    {
      "type": "testimonial_cta",
      "name": "Testimonial CTA",
      "settings": [
        {"type": "text", "id": "button_text", "label": "Button Text", "default": "TRY NOW"},
        {"type": "url", "id": "button_link", "label": "Button Link"}
      ]
    }
  ],
  "presets": [
    {
      "name": "Parasite info (blocks)",
      "blocks": [
        {"type": "heading"},
        {"type": "intro"},
        {"type": "main_image"},
        {"type": "subsection_title"},
        {"type": "sneak_in_item"},
        {"type": "sneak_in_item"},
        {"type": "sneak_in_item"},
        {"type": "bottom_line"},
        {"type": "cta"},
        {"type": "testimonial_title"},
        {"type": "testimonial_description"},
        {"type": "testimonial_item"},
        {"type": "testimonial_item"},
        {"type": "testimonial_item"},
        {"type": "testimonial_cta"}
      ]
    }
  ]
}


{% endschema %}
