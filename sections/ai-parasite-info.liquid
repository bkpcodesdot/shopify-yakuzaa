{% assign ai_gen_id = section.id | replace: '_', '' | downcase %}

{% style %}
/* Container */
.ai-parasite-info-{{ ai_gen_id }} {
  background-color: var(--section-bg);
  padding: var(--section-padding) 20px;
  max-width: 726px;
  margin: 0 auto;
  box-sizing: border-box;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}

/* Heading */
.ai-parasite-heading {
  font-size: var(--title-size);
  font-weight: bold;
  color: var(--title-color);
  margin-bottom: 20px;
  line-height: 1.2;
  text-align: left;
}
.ai-parasite-heading .highlight { color: var(--highlight-color); }

/* Intro */
.ai-parasite-intro {
  font-size: var(--text-size);
  color: var(--text-color);
  margin-bottom: 30px;
  line-height:1.6;
  text-align:left;
}

/* Main Image */
.ai-parasite-main-image {
  width:100%;
  margin-bottom:40px;
  border-radius: var(--image-border-radius);
  overflow:hidden;
}
.ai-parasite-main-image img {
  width: 100%;
  display: block;
  height: auto;
  object-fit: cover;
  object-position: bottom;
  aspect-ratio: 119 / 66;
}

/* Subsection Title */
.ai-parasite-subsection-title {
  font-size: var(--subsection-title-size);
  font-weight:bold;
  color:var(--title-color);
  text-align:left;
  margin-bottom:12px;
}

/* Sneak-in Items */
.ai-parasite-item img { width: 100%; border-radius:8px; object-fit:cover; margin-bottom: 8px; }
.ai-parasite-item-title { font-weight:bold; font-size: 18px; margin-bottom:6px; }
.ai-parasite-item-description { font-size:16px; line-height:1.5; margin-bottom: 16px; }

/* Bottom Line */
.ai-parasite-bottom-title {
  font-size: var(--bottom-title-size);
  font-weight:bold;
  margin-bottom:15px;
  font-style:italic;
  color:var(--title-color);
}
.ai-parasite-bottom-text {
  font-size: var(--text-size);
  color:var(--text-color);
  margin-bottom:25px;
  line-height:26px;
}

/* CTA */
.ai-parasite-cta {
  display:block;
  background-color: var(--button-bg);
  color: var(--button-text-color);
  padding: var(--button-padding) var(--button-padding-hr);
  border-radius: var(--button-radius);
  font-size: var(--button-text-size);
  font-weight:600;
  text-decoration:none;
  text-align:center;
  transition: background-color .3s;
}
.ai-parasite-cta:hover {
  background-color: var(--button-hover-bg);
  color: #ee882f;
  border: 2px solid #ee882f;
}

/* Responsive */
@media screen and (max-width: 768px) {
  .ai-parasite-info-{{ ai_gen_id }} { padding: calc(var(--section-padding) * 0.7) 15px; }
  .ai-parasite-cta { width:100%; }
}
@media screen and (max-width: 576px) {
  .ai-parasite-subsection-title { font-size: 20px; }
  .ai-parasite-intro { font-size: 15px; }
}
{% endstyle %}

<div class="ai-parasite-info-{{ ai_gen_id }}" style="
  --section-bg: {{ section.settings.section_background }};
  --section-padding: {{ section.settings.section_padding }}px;
  --title-size: {{ section.settings.title_size }}px;
  --title-color: {{ section.settings.title_color }};
  --highlight-color: {{ section.settings.highlight_color }};
  --text-size: {{ section.settings.text_size }}px;
  --text-color: {{ section.settings.text_color }};
  --image-border-radius: {{ section.settings.image_border_radius }}px;
  --subsection-title-size: {{ section.settings.subsection_title_size }}px;
  --bottom-title-size: {{ section.settings.bottom_title_size }}px;
  --button-bg: {{ section.settings.button_background }};
  --button-hover-bg: {{ section.settings.button_hover_background }};
  --button-text-color: {{ section.settings.button_text_color }};
  --button-text-size: {{ section.settings.button_text_size }}px;
  --button-padding: {{ section.settings.button_padding }}px;
  --button-padding-hr: {{ section.settings.button_padding | times: 1.5 }}px;
  --button-radius: {{ section.settings.button_border_radius }}px;
">

{% for block in section.blocks %}
  {% case block.type %}

    {% when 'heading' %}
      <div class="ai-parasite-heading" style="
        --title-size: {{ block.settings.title_size }}px;
        --title-color: {{ block.settings.title_color }};
        --highlight-color: {{ block.settings.highlight_color }};
      ">
        {{ block.settings.main_title | replace: block.settings.highlight_text, '<span class="highlight">' | append: block.settings.highlight_text | append: '</span>' }}
      </div>

    {% when 'intro' %}
      <div class="ai-parasite-intro" style="
        --text-size: {{ block.settings.text_size }}px;
        --text-color: {{ block.settings.text_color }};
      ">
        {{ block.settings.intro_text }}
      </div>

    {% when 'main_image' %}
      <div class="ai-parasite-main-image" style="--image-border-radius: {{ block.settings.image_border_radius }}px;">
        {% if block.settings.main_image != blank %}
          <img src="{{ block.settings.main_image | img_url: 'master' }}" alt="">
        {% endif %}
      </div>

    {% when 'subsection_title' %}
      <div class="ai-parasite-subsection-title" style="--subsection-title-size: {{ block.settings.subsection_title_size }}px;">
        {{ block.settings.subsection_title }}
      </div>
      <div class="cstm_sneak_items_wrapper">
        <div class="ai-parasite-wrapper">
  {% for block in section.blocks %}
    {% case block.type %}
      <div class="cstm_sneak_item">
          {% when 'sneak_in_image' %}
            {% if block.settings.image != blank %}
              <div class="ai-parasite-item">
                <img src="{{ block.settings.image | img_url: 'master' }}" alt="">
              </div>
            {% endif %}

          {% when 'sneak_in_title' %}
            <div class="ai-parasite-item-title">
              {{ block.settings.title }}
            </div>

          {% when 'sneak_in_description' %}
            <div class="ai-parasite-item-description">
              {{ block.settings.description }}
            </div>
          </div>
        {% endcase %}
      {% endfor %}
    </div>


      </div>
    {% comment %} {% when 'sneak_in_image' %}
      {% if block.settings.image != blank %}
        <div class="ai-parasite-item"><img src="{{ block.settings.image | img_url: 'master' }}" alt=""></div>
      {% endif %}

    {% when 'sneak_in_title' %}
      <div class="ai-parasite-item-title">{{ block.settings.title }}</div>

    {% when 'sneak_in_description' %}
      <div class="ai-parasite-item-description">{{ block.settings.description }}</div> {% endcomment %}

    {% when 'bottom_line' %}
      <div class="ai-parasite-bottom-title" style="--bottom-title-size: {{ block.settings.bottom_title_size }}px;">
        {{ block.settings.bottom_line_title }}
      </div>
      <div class="ai-parasite-bottom-text">{{ block.settings.bottom_line_text }}</div>

    {% when 'cta' %}
      <a href="{{ block.settings.cta_link }}" class="ai-parasite-cta" style="
        --button-bg: {{ block.settings.button_background }};
        --button-text-color: {{ block.settings.button_text_color }};
        --button-text-size: {{ block.settings.button_text_size }}px;
        --button-padding: {{ block.settings.button_padding }}px;
        --button-padding-hr: {{ block.settings.button_padding | times: 1.5 }}px;
        --button-radius: {{ block.settings.button_border_radius }}px;
      ">
        {{ block.settings.cta_text }}
      </a>

  {% endcase %}
{% endfor %}

</div>

{% schema %}
{
  "name": "Parasite info (blocks)",
  "settings": [
    {"type":"color","id":"section_background","label":"Section background","default":"#ffffff"},
    {"type":"color","id":"title_color","label":"Title color","default":"#000000"},
    {"type":"color","id":"highlight_color","label":"Highlight color","default":"#ff6b35"},
    {"type":"color","id":"text_color","label":"Text color","default":"#333333"},
    {"type":"range","id":"title_size","label":"Main title size","min":20,"max":60,"step":2,"unit":"px","default":36},
    {"type":"range","id":"text_size","label":"Body text size","min":12,"max":20,"step":1,"unit":"px","default":16},
    {"type":"range","id":"image_border_radius","label":"Main image border radius","min":0,"max":30,"step":1,"unit":"px","default":8},
    {"type":"range","id":"subsection_title_size","label":"Subsection title size","min":14,"max":40,"step":1,"unit":"px","default":24},
    {"type":"range","id":"bottom_title_size","label":"Bottom title size","min":16,"max":32,"step":1,"unit":"px","default":22},
    {"type":"color","id":"button_background","label":"Button background","default":"#ff6b35"},
    {"type":"color","id":"button_hover_background","label":"Button hover background","default":"#e55a2b"},
    {"type":"color","id":"button_text_color","label":"Button text color","default":"#ffffff"},
    {"type":"range","id":"button_text_size","label":"Button text size","min":12,"max":24,"step":1,"unit":"px","default":16},
    {"type":"range","id":"button_padding","label":"Button padding","min":8,"max":30,"step":1,"unit":"px","default":16},
    {"type":"range","id":"button_border_radius","label":"Button border radius","min":0,"max":30,"step":1,"unit":"px","default":8},
    {"type":"range","id":"section_padding","label":"Section padding","min":20,"max":100,"step":5,"unit":"px","default":50}
  ],
  "blocks":[
    {"type":"heading","name":"Heading","settings":[{"type":"text","id":"main_title","label":"Main title"},{"type":"text","id":"highlight_text","label":"Highlight text"},{"type":"range","id":"title_size","label":"Title font size","min":20,"max":60,"default":36},{"type":"color","id":"title_color","label":"Title color"},{"type":"color","id":"highlight_color","label":"Highlight color"}]},
    {"type":"intro","name":"Intro","settings":[{"type":"richtext","id":"intro_text","label":"Intro text"},{"type":"range","id":"text_size","label":"Intro font size","min":12,"max":24,"default":16},{"type":"color","id":"text_color","label":"Intro color"}]},
    {"type":"main_image","name":"Main image","settings":[{"type":"image_picker","id":"main_image","label":"Main image"},{"type":"range","id":"image_border_radius","label":"Main image border radius","min":0,"max":30,"default":8}]},
    {"type":"subsection_title","name":"Subsection title","settings":[{"type":"text","id":"subsection_title","label":"Subsection title"},{"type":"range","id":"subsection_title_size","label":"Subsection title size","min":12,"max":40,"default":24}]},
    {"type":"sneak_in_image","name":"Sneak-in Image","settings":[{"type":"image_picker","id":"image","label":"Image"}]},
    {"type":"sneak_in_title","name":"Sneak-in Title","settings":[{"type":"text","id":"title","label":"Title"}]},
    {"type":"sneak_in_description","name":"Sneak-in Description","settings":[{"type":"richtext","id":"description","label":"Description"}]},
    {"type":"bottom_line","name":"Bottom line","settings":[{"type":"text","id":"bottom_line_title","label":"Bottom line title"},{"type":"richtext","id":"bottom_line_text","label":"Bottom line text"},{"type":"range","id":"bottom_title_size","label":"Bottom title size","min":16,"max":36,"default":22}]},
    {"type":"cta","name":"CTA","settings":[{"type":"text","id":"cta_text","label":"CTA text"},{"type":"url","id":"cta_link","label":"CTA link"},{"type":"color","id":"button_background","label":"Button background"},{"type":"color","id":"button_text_color","label":"Button text color"},{"type":"range","id":"button_text_size","label":"Button text size","min":12,"max":24,"default":16},{"type":"range","id":"button_padding","label":"Button padding","min":8,"max":30,"default":16},{"type":"range","id":"button_border_radius","label":"Button border radius","min":0,"max":30,"default":8}]}
  ],
  "presets":[{"name":"Parasite info (blocks)","blocks":[{"type":"heading"},{"type":"intro"},{"type":"main_image"},{"type":"subsection_title"},{"type":"sneak_in_image"},{"type":"sneak_in_title"},{"type":"sneak_in_description"},{"type":"bottom_line"},{"type":"cta"}]}]
}
{% endschema %}
