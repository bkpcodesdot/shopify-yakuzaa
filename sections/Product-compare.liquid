<style>
.ai-comparison-table-{{ ai_gen_id }} {
  background-color: {{ block.settings.section_background_color }};
  padding: {{ block.settings.section_padding }}px;
  margin: 0 auto;
}

.ai-comparison-table__container-{{ ai_gen_id }} {
  max-width: 726px;
  margin: 0 auto;
}

.ai-comparison-table__header-{{ ai_gen_id }} {
  text-align: {{ block.settings.text_alignment }};
  margin-bottom: 40px;
}

.ai-comparison-table__heading-{{ ai_gen_id }} {
  font-family: {{ block.settings.heading_font.family }}, {{ block.settings.heading_font.fallback_families }};
  font-weight: {{ block.settings.heading_font.weight }};
  font-size: {{ block.settings.heading_size }}px;
  color: {{ block.settings.heading_color }};
  margin: 0 0 16px 0;
  line-height: 1.2;
}

.ai-comparison-table__heading-{{ ai_gen_id }} span {
  color: {{ block.settings.heading_accent_color }};
}

.ai-comparison-table__subheading-{{ ai_gen_id }} {
  font-family: {{ block.settings.subheading_font.family }}, {{ block.settings.subheading_font.fallback_families }};
  font-weight: {{ block.settings.subheading_font.weight }};
  font-size: {{ block.settings.subheading_size }}px;
  color: {{ block.settings.subheading_color }};
  margin: 0 0 24px 0;
  line-height: 1.4;
}

.ai-comparison-table__intro-{{ ai_gen_id }} {
  font-family: {{ block.settings.intro_font.family }}, {{ block.settings.intro_font.fallback_families }};
  font-weight: {{ block.settings.intro_font.weight }};
  font-size: {{ block.settings.intro_size }}px;
  color: {{ block.settings.intro_color }};
  margin-bottom: 40px;
  line-height: 1.6;
}

.ai-comparison-table__table-wrapper-{{ ai_gen_id }} {
  overflow-x: auto;
  margin-bottom: 40px;
  border: 1px solid #016401;
  border-radius: 5px;
}

.ai-comparison-table__table-{{ ai_gen_id }} {
  width: 100%;
  border-collapse: collapse;
  border: 1px solid {{ block.settings.table_border_color }};
  border-radius: {{ block.settings.table_border_radius }}px;
  overflow: hidden;
  text-align: center;
}

.ai-comparison-table__row-{{ ai_gen_id }} {
  border-bottom: 1px solid {{ block.settings.table_border_color }};
  display: grid;
  grid-template-columns: 2.5fr 4fr 2.5fr;
  align-items: center;
  justify-content: center;
}

.ai-comparison-table__row-{{ ai_gen_id }}:last-child {
  border-bottom: none;
}

{% if block.settings.enable_alternating_rows %}
.ai-comparison-table__row-{{ ai_gen_id }}:nth-child(even) {
  background-color: {{ block.settings.table_row_alt_background }};
}
{% endif %}

.ai-comparison-table__cell-{{ ai_gen_id }} {
  padding: 16px;
  vertical-align: middle;
  font-family: {{ block.settings.table_font.family }}, {{ block.settings.table_font.fallback_families }};
  font-weight: {{ block.settings.table_font.weight }};
  font-size: {{ block.settings.table_font_size }}px;
  color: {{ block.settings.table_text_color }};
}

.ai-comparison-table__cell--product-{{ ai_gen_id }} {
  text-align: center;
  background-color: {{ block.settings.product_column_background }};
}

.ai-comparison-table__cell--feature-{{ ai_gen_id }} {
  background-color: {{ block.settings.feature_column_background }};
}

.ai-comparison-table__cell--competitor-{{ ai_gen_id }} {
  text-align: center;
  background-color: {{ block.settings.competitor_column_background }};
}

.ai-comparison-table__product-image-{{ ai_gen_id }} {
  width: 100%;
  max-width: 65px;
  height: auto;
  margin: 0 auto;
}

.ai-comparison-table__product-placeholder-{{ ai_gen_id }} {
  width: 100%;
  max-width: 200px;
  height: 200px;
  background-color: #f4f4f4;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto;
}

.ai-comparison-table__product-placeholder-{{ ai_gen_id }} svg {
  width: 60%;
  height: 60%;
  opacity: 0.5;
}

.ai-comparison-table__icon-{{ ai_gen_id }} {
  font-size: 17px;
  font-weight: bold;
}

.ai-comparison-table__icon--check-{{ ai_gen_id }} {
  color: {{ block.settings.check_icon_color }};
}

.ai-comparison-table__icon--cross-{{ ai_gen_id }} {
  color: {{ block.settings.cross_icon_color }};
}

.ai-comparison-table__button-wrapper-{{ ai_gen_id }} {
  text-align: {{ block.settings.text_alignment }};
}

.ai-comparison-table__button-{{ ai_gen_id }} {
  display: block;
  padding: {{ block.settings.button_padding }}px {{ block.settings.button_padding | times: 1.5 }}px;
  background-color: {{ block.settings.button_background_color }};
  color: {{ block.settings.button_text_color }};
  text-decoration: none;
  border-radius: {{ block.settings.button_border_radius }}px;
  font-family: {{ block.settings.button_font_family.family }}, {{ block.settings.button_font_family.fallback_families }};
  font-weight: {{ block.settings.button_font_family.weight }};
  font-size: {{ block.settings.button_font_size }}px;
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;
  text-align: center;
}

.ai-comparison-table__button-{{ ai_gen_id }}:hover {
  background-color: {{ block.settings.button_hover_color }};
  color: {{ block.settings.button_hover_text_color }};
}

@media screen and (max-width: 768px) {
  .ai-comparison-table__table-{{ ai_gen_id }} {
    font-size: 14px;
  }
  .ai-comparison-table__cell-{{ ai_gen_id }} {
    padding: 12px 8px;
  }
  .ai-comparison-table__heading-{{ ai_gen_id }} {
    font-size: {{ block.settings.heading_size | times: 0.8 }}px;
  }
  .ai-comparison-table__subheading-{{ ai_gen_id }} {
    font-size: {{ block.settings.subheading_size | times: 0.9 }}px;
  }
  .ai-comparison-table__intro-{{ ai_gen_id }} {
    font-size: {{ block.settings.intro_size | times: 0.9 }}px;
  }
}

@media screen and (max-width: 576px) {
  .ai-comparison-table-{{ ai_gen_id }} {
    padding: 0 0px;
  }
  .ai-comparison-table__cell-{{ ai_gen_id }} {
    font-size: 14px;
  }
}
</style>



{% for block in section.blocks %}
  {% assign ai_gen_id = block.id %}
  <div class="ai-comparison-table-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
    <div class="ai-comparison-table__container-{{ ai_gen_id }}">
      <div class="ai-comparison-table__header-{{ ai_gen_id }}">
        {% if block.settings.heading != blank %}
          <h2 class="ai-comparison-table__heading-{{ ai_gen_id }}">{{ block.settings.heading }}</h2>
        {% endif %}
        {% if block.settings.subheading != blank %}
          <h3 class="ai-comparison-table__subheading-{{ ai_gen_id }}">{{ block.settings.subheading }}</h3>
        {% endif %}
        {% if block.settings.intro_text != blank %}
          <div class="ai-comparison-table__intro-{{ ai_gen_id }}">{{ block.settings.intro_text }}</div>
        {% endif %}
      </div>

      <div class="ai-comparison-table__table-wrapper-{{ ai_gen_id }}">
        <table class="ai-comparison-table__table-{{ ai_gen_id }}">
          <tbody>
            <tr class="ai-comparison-table__row-{{ ai_gen_id }}">
              <td class="ai-comparison-table__cell-{{ ai_gen_id }} ai-comparison-table__cell--product-{{ ai_gen_id }}">
                {% if block.settings.product_image %}
                  <img 
                    src="{{ block.settings.product_image | image_url: width: 400 }}" 
                    alt="{{ block.settings.product_image.alt | escape }}"
                    class="ai-comparison-table__product-image-{{ ai_gen_id }}"
                    loading="lazy"
                  >
                {% else %}
                  <div class="ai-comparison-table__product-placeholder-{{ ai_gen_id }}">
                    {{ 'product-1' | placeholder_svg_tag }}
                  </div>
                {% endif %}
              </td>
              <td class="ai-comparison-table__cell-{{ ai_gen_id }} ai-comparison-table__cell--feature-{{ ai_gen_id }}">
                <span>Feature</span>
              </td>
              <td class="ai-comparison-table__cell-{{ ai_gen_id }} ai-comparison-table__cell--competitor-{{ ai_gen_id }}">
                <span>Other Brands</span>
              </td>
            </tr>

            {% for i in (1..8) %}
              {% assign feature_key = 'feature_' | append: i %}
              {% assign competitor_key = 'competitor_' | append: i %}
              {% assign feature_text = block.settings[feature_key] %}
              {% assign competitor_value = block.settings[competitor_key] %}
              
              {% if feature_text != blank %}
                <tr class="ai-comparison-table__row-{{ ai_gen_id }}">
                  <td class="ai-comparison-table__cell-{{ ai_gen_id }} ai-comparison-table__cell--product-{{ ai_gen_id }}">
                    <span class="ai-comparison-table__icon-{{ ai_gen_id }} ai-comparison-table__icon--check-{{ ai_gen_id }}">✅</span>
                  </td>
                  <td class="ai-comparison-table__cell-{{ ai_gen_id }} ai-comparison-table__cell--feature-{{ ai_gen_id }}">
                    {{ feature_text }}
                  </td>
                  <td class="ai-comparison-table__cell-{{ ai_gen_id }} ai-comparison-table__cell--competitor-{{ ai_gen_id }}">
                    {% if competitor_value == 'check' %}
                      <span class="ai-comparison-table__icon-{{ ai_gen_id }} ai-comparison-table__icon--check-{{ ai_gen_id }}">✅</span>
                    {% else %}
                      <span class="ai-comparison-table__icon-{{ ai_gen_id }} ai-comparison-table__icon--cross-{{ ai_gen_id }}">❌</span>
                    {% endif %}
                  </td>
                </tr>
              {% endif %}
            {% endfor %}
          </tbody>
        </table>
      </div>

      {% if block.settings.button_text != blank %}
        <div class="ai-comparison-table__button-wrapper-{{ ai_gen_id }}">
          <a href="{{ block.settings.button_link }}" class="ai-comparison-table__button-{{ ai_gen_id }}">
            {{ block.settings.button_text }}
          </a>
        </div>
      {% endif %}
    </div>
  </div>
{% endfor %}

{% schema %}
{
  "name": "Product compare",
  "settings": [
    { "type": "text", "id": "heading_text", "label": "Main heading", "default": "The Natural, Science-Backed" },
    { "type": "color", "id": "heading_color", "label": "Heading color", "default": "#000000" },
    { "type": "range", "id": "heading_size", "min": 12, "max": 72, "step": 1, "unit": "px", "label": "Heading font size", "default": 32 },

    { "type": "text", "id": "highlight_word", "label": "Highlight word", "default": "Solution" },
    { "type": "color", "id": "highlight_color", "label": "Highlight color", "default": "#ff0000" },
    { "type": "range", "id": "highlight_size", "min": 12, "max": 72, "step": 1, "unit": "px", "label": "Highlight font size", "default": 32 },

    { "type": "richtext", "id": "intro_text", "label": "Introduction text", "default": "<p>Discover our revolutionary approach to wellness...</p>" },
    { "type": "color", "id": "intro_color", "label": "Intro text color", "default": "#333333" },
    { "type": "range", "id": "intro_size", "min": 12, "max": 36, "step": 1, "unit": "px", "label": "Intro font size", "default": 16 },

    { "type": "image_picker", "id": "main_image", "label": "Main product image" },
    { "type": "checkbox", "id": "show_features", "label": "Show feature points", "default": true },
    { "type": "color", "id": "feature_color", "label": "Feature text color", "default": "#000000" },
    { "type": "range", "id": "feature_size", "min": 10, "max": 30, "step": 1, "unit": "px", "label": "Feature font size", "default": 14 },

    { "type": "image_picker", "id": "secondary_image", "label": "Secondary image" },
    { "type": "text", "id": "subheading", "label": "Subheading", "default": "Compare our solutions" },
    { "type": "color", "id": "subheading_color", "label": "Subheading color", "default": "#000000" },
    { "type": "range", "id": "subheading_size", "min": 12, "max": 48, "step": 1, "unit": "px", "label": "Subheading font size", "default": 20 },

    { "type": "image_picker", "id": "column_1_image", "label": "Column 1 image" },
    { "type": "text", "id": "column_1_title", "label": "Column 1 title", "default": "Column 1" },
    { "type": "richtext", "id": "column_1_content", "label": "Column 1 content", "default": "<p>Details for column 1.</p>" },

    { "type": "image_picker", "id": "column_2_image", "label": "Column 2 image" },
    { "type": "text", "id": "column_2_title", "label": "Column 2 title", "default": "Column 2" },
    { "type": "richtext", "id": "column_2_content", "label": "Column 2 content", "default": "<p>Details for column 2.</p>" },

    { "type": "color", "id": "column_title_color", "label": "Column title color", "default": "#000000" },
    { "type": "range", "id": "column_title_size", "min": 12, "max": 36, "step": 1, "unit": "px", "label": "Column title font size", "default": 18 },
    { "type": "color", "id": "column_content_color", "label": "Column content color", "default": "#333333" },
    { "type": "range", "id": "column_content_size", "min": 10, "max": 24, "step": 1, "unit": "px", "label": "Column content font size", "default": 14 },

    { "type": "checkbox", "id": "enable_alternating_rows", "label": "Enable alternating column styles", "default": false },

    { "type": "text", "id": "cta_text", "label": "Button text", "default": "Shop Now" },
    { "type": "url", "id": "cta_link", "label": "Button link" },
    { "type": "color", "id": "cta_bg", "label": "Button background color", "default": "#000000" },
    { "type": "color", "id": "cta_color", "label": "Button text color", "default": "#ffffff" },
    { "type": "range", "id": "cta_size", "min": 12, "max": 36, "step": 1, "unit": "px", "label": "Button font size", "default": 16 }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature Point",
      "settings": [
        { "type": "image_picker", "id": "icon", "label": "Feature icon" },
        { "type": "text", "id": "title", "label": "Feature title", "default": "New Feature" }
      ]
    }
  ],
  "max_blocks": 10,
  "presets": [
    { "name": "Product compare" }
  ]
}
{% endschema %}
